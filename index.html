<!DOCTYPE html>
<html lang="en">
<head>
    <title>WarsawJS Slides: NativeScript</title>

    <meta charset="utf-8"/>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!-- Shower Theme -->
    <link rel="stylesheet" href="vendors/shower-ribbon/styles/screen-16x10.css"/>
    <link rel="stylesheet" href="vendors/shower-warsawjs/styles/main.css"/>

    <!-- Prism.js -->
    <link rel="stylesheet" href="vendors/prism/prism.css"/>
    <link rel="stylesheet" href="vendors/prism/custom-prism.css"/>
</head>
<body class="shower list">
    <header class="caption">
        <h1>NativeScript: Gentle introduction</h1>
        <p>We talk about JavaScript. Each month in Warsaw, Poland.</p>
    </header>

    <section class="slide front-page">
        <div class="logo">
            <!-- Logo WarsawJS -->
            <img src="pictures/logo/warsawjs-logo-light.png">
        </div>
        <div class="details">
            <!-- 1. Avatar -->
            <img src="pictures/author.jpg" alt="Speaker"/>

            <!-- 2. Speaker -->
            <h2>Paweł Kondraciuk</h2>

            <!-- 3. Presentation title -->
            <h2><strong>NativeScript: Gentle introduction</strong></h2>

            <!-- 4. Presentation date -->
            <h2>2016-08-10</h2>

            <!-- 5. Contact the speaker -->
            <h2><a href="mailto:kondraciukpawel@gmail.com">kondraciukpawel@gmail.com</a></h2>
        </div>
    </section>

    <section class="slide">
        <div class="fixed-table">
            <div class="table-column">
                <h2>Who?</h2>
                <div>Frontend Developer</div>
                <div class="next">ex Python Developer</div>
            </div>
            <div class="next table-column center">
                <h2>Where?</h2>
                <p>codequest</p>
                <img src="pictures/codequest.png" alt="codequest"/>
            </div>
            <div class="next table-column right">
                <h2>From?</h2>
                <p>Bialystok</p>
                <img src="pictures/bialystok.jpg" alt="Bialystok"/>
            </div>
        </div>
    </section>

    <section class="slide">
        <h2>What are the common solutions?</h2>
        <ul>
            <li class="next">Native <mark>ObjC/Swift</mark>, <mark>C#</mark>, <mark>Java</mark></li>
            <li class="next">Cross-compiled <mark>Xamarin</mark></li>
            <li class="next">Hybrid <mark>PhoneGap</mark>, <mark>Cordova</mark></li>
            <li class="next">Native <mark class="important">JavaScript</mark></li>
        </ul>
    </section>

    <section class="slide">
        <h2>Native JavaScript</h2>
        <ul>
            <li class="next">Fuse - declarative markup</li>
            <li class="next">Tabris.js - Cordova modification</li>
            <li class="next">Appcelerator Titanium - paid, we don't like that</li>
            <li class="next">Facebook React Native - learn once, write everywhere</li>
            <li class="next"><mark>Telerik NativeScript</mark> - ...</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Architecture</h2>
        <ul>
            <li class="next">No DOM</li>
            <li class="next">Native components</li>
            <li class="next">
                JavaScript Virtual Machine
                <ul>
                    <li>
                        Google V8 JavaScript Engine
                        <img src="pictures/android.png" alt="android"/>
                    </li>
                    <li>
                        WebKit JavaScript Core
                        <img src="pictures/windows.png" alt="windows"/>
                        <img src="pictures/mac.png" alt="mac"/>
                    </li>
                </ul>
                    
                    
            </li>
            <li class="next">Node.js modules</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Telerik NativeScript</h2>
        <ul>
            <li class="next">Goal: 100% shared code</li>
            <li class="next">JavaScript, XML, CSS</li>
            <li class="next"><mark class="important">Direct access</mark> to native API</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Direct API access</h2>
        <pre style="font-size: 21px;" class="listing">
            <code>// Android</code>
            <code>var time = new <mark>android.text.format.Time()</mark>;</code>
            <code>time.<mark>set(1, 0, 2015)</mark>;</code>
            <code>console.log(time.<mark>format("%D")</mark>);</code>
        </pre>
        <pre style="font-size: 21px;" class="listing next">
            <code>// iOS</code>
            <code>var alert = new <mark>UIAlertView()</mark>;</code>
            <code>alert.<mark>message</mark> = "Hello world!";</code>
            <code>alert.<mark>addButtonWithTitle("OK")</mark>;</code>
            <code>alert.<mark>show()</mark>;</code>
        </pre>
    </section>

    <section class="slide">
        <img src="pictures/javacode.png" alt="Java...Script" class="cover"/>
    </section>

    <section class="slide">
        <img src="pictures/how-it-is-possible.jpg" alt="How it is even possible?!" class="cover"/>
    </section>

    <section class="slide">
        <h2>Metadata</h2>
        <img src="pictures/metadata-1.png" height="185x" alt="metadata-1" class="next v-middle"/>
        <img src="pictures/metadata-2.png" height="185px" alt="metadata-2" class="next v-middle"/>
        <img src="pictures/metadata-3.png" height="240px" alt="metadata-3" class="next v-middle"/>
    </section>

    <section class="slide prism">
        <h2>How does it work?</h2>
        <pre class="language-javascript">
            <code>var file = new java.io.File(path);</code>
        </pre>
        <ol>
            <li class="next">Metadata lookup <mark class="important">java.io.File()</mark></li>
            <li class="next">Type conversion <mark class="important">string</mark> &rarr; <mark class="important">java.lang.String</mark></li>
            <li class="next">Call dispatcher <mark class="important">java.io.File()</mark> &larr;&rarr; <mark class="important">file = FileProxy</mark></li>
        </ol>
    </section>

    <section class="slide">
        <h2>Why NativeScript accesses native API directly whereas React Native uses wrappers?</h2>
        <p class="answer next shout">UI Thread</p>
    </section>

    <section class="slide">
        <h2>Single thread benefits</h2>
        <ul>
            <li class="next">Full native API access</li>
            <li class="next">Native performance</li>
        </ul>
    </section>

    <section class="slide" id="cover">
        <h2 class="shout">Performance</h2>
        <p class="source">source: <a href="https://github.com/NativeScript/sample-iOS-Profiling">https://github.com/NativeScript/sample-iOS-Profiling</a></p>
    </section>

    <section class="slide prism">
        <h2>Startup time</h2>
        <p>Blank app with a single button.</p>
        <table class="striped">
            <thead>
                <tr>
                    <th class="col">Platform</th>
                    <th>Run 1</th>
                    <th>Run 2</th>
                    <th>Run 3</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Native</td>
                    <td>111ms</td>
                    <td>105ms</td>
                    <td>108ms</td>
                </tr>
                <tr>
                    <td>React Native</td>
                    <td>358ms</td>
                    <td>361ms</td>
                    <td>353ms</td>
                </tr>
                <tr>
                    <td>Xamarin Forms</td>
                    <td>484ms</td>
                    <td>471ms</td>
                    <td>469ms</td>
                </tr>
                <tr>
                    <td>Cordova</td>
                    <td>613ms</td>
                    <td>612ms</td>
                    <td>609ms</td>
                </tr>
                <tr>
                    <td><strong>NativeScript</strong></td>
                    <td><strong>674ms</strong></td>
                    <td><strong>672ms</strong></td>
                    <td><strong>670ms</strong></td>
                </tr>
            </tbody>
        </table>
    </section>

    <section class="slide prism">
        <h2>Primitives</h2>
        <p>
            Marshaling of numbers between JavaScript and native.</br>
            1 000 000 calls to native code.
        </p>
        <table class="striped">
            <thead>
                <tr>
                    <th>Platform</th>
                    <th>Run 1</th>
                    <th>Run 2</th>
                    <th>Run 3</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Native</td>
                    <td>5ms</td>
                    <td>4ms</td>
                    <td>4ms</td>
                </tr>
                <tr>
                    <td>Xamarin</td>
                    <td>27ms</td>
                    <td>27ms</td>
                    <td>28ms</td>
                </tr>
                <tr>
                    <td><strong>NativeScript</strong></td>
                    <td><strong>989ms</strong></td>
                    <td><strong>998ms</strong></td>
                    <td><strong>980ms</strong></td>
                </tr>
                <tr>
                    <td>Appcelerator</td>
                    <td>34444ms</td>
                    <td>33969ms</td>
                    <td>35916ms</td>
                </tr>
                <tr>
                    <td>React Native</td>
                    <td>130600ms</td>
                    <td>125140ms</td>
                    <td>127220ms</td>
                </tr>
                <tr>
                    <td>Cordova</td>
                    <td>351420ms</td>
                    <td>357940ms</td>
                    <td>356740ms</td>
                </tr>
            </tbody>
        </table>
    </section>

    <section class="slide prism">
        <h2>Strings</h2>
        <p>
            Marshaling of strings between JavaScript and native.</br>
            100 000 calls to native code.
        </p>
        <table class="striped">
            <thead>
                <tr>
                    <th>Platform</th>
                    <th>Run 1</th>
                    <th>Run 2</th>
                    <th>Run 3</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Native</td>
                    <td>42ms</td>
                    <td>42ms</td>
                    <td>42ms</td>
                </tr>
                <tr>
                    <td>Xamarin</td>
                    <td>248ms</td>
                    <td>234ms</td>
                    <td>244ms</td>
                </tr>
                <tr>
                    <td><strong>NativeScript</strong></td>
                    <td><strong>415ms</strong></td>
                    <td><strong>444ms</strong></td>
                    <td><strong>418ms</strong></td>
                </tr>
                <tr>
                    <td>Appcelerator</td>
                    <td>3215ms</td>
                    <td>3198ms</td>
                    <td>3180ms</td>
                </tr>
                <tr>
                    <td>React Native</td>
                    <td>12358ms</td>
                    <td>12464ms</td>
                    <td>12547ms</td>
                </tr>
                <tr>
                    <td>Cordova</td>
                    <td>36864ms</td>
                    <td>36063ms</td>
                    <td>35861ms</td>
                </tr>
            </tbody>
        </table>
    </section>

    <section class="slide prism">
        <h2>Big Data</h2>
        <p> 
            Marshaling of an array with 65 536 elements between JavaScript and native. </br>
            200 calls to native code.
        </p>
        <table class="striped">
            <thead>
                <tr>
                    <th>Platform</th>
                    <th>Run 1</th>
                    <th>Run 2</th>
                    <th>Run 3</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Native</td>
                    <td>768ms</td>
                    <td>774ms</td>
                    <td>759ms</td>
                </tr>
                <tr>
                    <td><strong>NativeScript</strong></td>
                    <td><strong>1135ms</strong></td>
                    <td><strong>1129ms</strong></td>
                    <td><strong>1138ms</strong></td>
                </tr>
                <tr>
                    <td>Xamarin</td>
                    <td>3763ms</td>
                    <td>3906ms</td>
                    <td>3789ms</td>
                </tr>
                <tr>
                    <td>Cordova</td>
                    <td>9655ms</td>
                    <td>9714ms</td>
                    <td>9730ms</td>
                </tr>
                <tr>
                    <td>React Native</td>
                    <td>47873ms</td>
                    <td>47695ms</td>
                    <td>47859ms</td>
                </tr>
                <tr>
                    <td>Appcelerator</td>
                    <td>50091ms</td>
                    <td>45149ms</td>
                    <td>47927ms</td>
                </tr>
            </tbody>
        </table>
    </section>

    <section class="slide">
        <h2>Single thread drawbacks</h2>
        <ul>
            <li class="next">Heavy jobs may cause frame rate drop</li>
            <li class="next">Solution?</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Background threads</h2>
        <ul>
            <li class="next">No simple mechanism in NativeScript<span class="next">...yet</span></li>
            <li class="next">But lots of cases are already covered!</li>
        </ul>
    </section>

    <section class="slide">
        <h2>File system</h2>
        <pre class="listing">
            <code>var fs = <mark>require("file-system")</mark>;</code>
            <code>var documents = fs.knownFolders.documents();</code>
            <code>documents.<mark>getFile("Test.txt").readText()</mark></code>
            <code>    .then(function (<mark>content</mark>) {</code>
            <code>        // Successfully read the file's content.</code>
            <code>    });</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Http</h2>
        <pre class="listing">
            <code>var http = <mark>require("http");</mark></code>
            <code>http.<mark>getJSON("https://httpbin.org/get")</mark></code>
            <code>    .then(function (<mark>r</mark>) {</code>
            <code>        // Argument (r) is JSON!</code>
            <code>    });</code>
        </pre>
    </section>

    <section class="slide prism">
        <pre class="listing">
            <code>// file.<mark>ios</mark>.js</code>
            <code>exports.getFile = function(path) {</code>
            <code>    var fileManager = NSFileManager.defaultManager();</code>
            <code>    return fileManager.createFileAtPathContentsAttributes(path);</code>
            <code>}</code>
            <code>// file.<mark>android</mark>.js</code>
            <code>exports.getFile = function(path) {</code>
            <code>    return new java.io.File(path);</code>
            <code>}</code>
            <code>// main.js</code>
            <code>var File = <mark>require("./file")</mark>;</code>
            <code>var file = File.getFile("path");</code>
        </pre>
    </section>

    <section class="slide">
        <img src="pictures/npm.png" alt="NPM" class="cover"/>
    </section>

    <section class="slide">
        <h2>Layouts</h2>
        <div class="fixed-table">
            <div class="table-column">
                <img src="pictures/absolute.png" alt="Absolute layout" height="80%"/>
                <p>AbsoluteLayout</p>        
            </div>
            <div class="table-column right">
                <img src="pictures/dock.png" alt="Dock layout" height="80%"/>
                <p>DockLayout</p>        
            </div>
            <div class="table-column center">
                <img src="pictures/grid.png" alt="Grid layout" height="80%"/>
                <p>GridLayout</p>        
            </div>
            <div class="table-column center">
                <img src="pictures/stack.png" alt="Stack layout" height="80%"/>
                <p>StackLayout</p>        
            </div>
            <div class="table-column center">
                <img src="pictures/wrap.png" alt="Wrap layout" height="80%"/>
                <p>WrapLayout</p>        
            </div>
        </div>
    </section>

    <section class="slide">
        <img src="pictures/debug.png" alt="Debugging" class="cover"/>
    </section>

    <section class="slide">
        <h2 class="shout">Demo</h2>
    </section>

    <section class="slide">
        <h2>NativeScript<span class="next"> + Angular = &lt;3</span></h2>
        <pre class="listing next">
            <code>import {Component} from "@angular/core";</code>
            <code>@Component({</code>
            <code>  selector: "my-app",</code>
            <code>  template: <mark>"&lt;Label text=‘Hello!’>&lt;/Label>"</mark></code>
            <code>})</code>
            <code>export class AppComponent {}</code>
        </pre>
    </section>

    <section class="slide">
        <h2 class="shout">Demo #2</h2>
    </section>

    <section class="slide">
        <h2>Pros</h2>
        <ul>
            <li class="next">Lots of shared code</li>
            <li class="next">Single code base</li>
            <li class="next">Skill re-use</li>
            <li class="next">Live reloading</li>
            <li class="next">Available on all major platforms</li>
            <li class="next">Native API access</li>
            <li class="next">Cross-platform abstractions</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Cons</h2>
        <ul>
            <li class="next">Cross-platform abstractions</li>
            <li class="next">No mechanism for background threads</li>
            <li class="next">No hot reloading :(</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Summary</h2>
        <ul>
            <li class="next">You don't need Java/ObjC/C# for mobile development</li>
            <li class="next">You can call native API using JavaScript</li>
            <li class="next">NativeScript and NG2 can rock together</li>
            <li class="next">App development for multiple platforms is easier than you think</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Links</h2>
        <ul>
            <li><a href="https://www.nativescript.org/">NativeScript</a></li>
            <li><a href="https://github.com/pawelkondraciuk/nativescript-hello-world-demo-1">Demo 1</a></li>
            <li><a href="https://github.com/pawelkondraciuk/nativescript-groceries-demo-2">Demo 2</a></li>
        </ul>
    </section>

    <section class="slide">
        <h3 class="shout">Questions?</h3>
        <p class="source">kondraciukpawel@gmail.com</p>
    </section>

    <section class="slide">
        <h3 class="shout">See you next month at WarsawJS</h3>
    </section>

    <div class="progress"></div>

    <footer class="badge">
        <a href="https://github.com/pawelkondraciuk/warsawjs-nativescript">Fork me on GitHub</a>
    </footer>

    <footer class="badge badge-down">
        <a href="#" class="fullscreen">Fullscreen</a>
    </footer>

    <script src="modules/analytics.js"></script>
    <script src="vendors/gamepad/gamepad.js"></script>
    <script src="vendors/shower/shower.min.js"></script>
    <script src="vendors/shower-gamepad/shower.gamepad.js"></script>
    <script src="modules/fullscreen.js"></script>

    <!-- Prism.js -->
    <script src="vendors/prism/prism.js"></script>
    <script src="vendors/prism/custom-prism.js"></script>
</body>
</html>
